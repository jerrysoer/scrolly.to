/* ═══════════════════════════════════════════════════════════════════
   Shared explainer styles (all explainers via [data-scope^="explainer-"])
   ═══════════════════════════════════════════════════════════════════ */

/* ── Keyframes ── */
@keyframes tariffs-fade-in {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes tariffs-rise-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes tariffs-slide-from-left {
  from { opacity: 0; transform: translateX(-32px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes tariffs-count-up {
  from { opacity: 0; transform: scale(0.85); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes pulse-glow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes scanline {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

@keyframes confetti-fall {
  0% { transform: translateY(-20px) rotate(0deg) scale(0); opacity: 0; }
  15% { opacity: 1; transform: translateY(0) rotate(45deg) scale(1); }
  100% { transform: translateY(130px) rotate(720deg) scale(0.3); opacity: 0; }
}

@keyframes dash-flow {
  to { stroke-dashoffset: -20; }
}

@keyframes flow-pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

@keyframes node-appear {
  from { opacity: 0; transform: scale(0); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes bar-grow {
  from { width: 0; }
}

@keyframes tilt-scales {
  from { transform: rotate(0deg); }
  to { transform: rotate(-12deg); }
}

/* ── Section entrance animation ── */
[data-scope^="explainer-"] .section-fade-in {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.7s ease-out, transform 0.7s ease-out;
}
[data-scope^="explainer-"] .section-fade-in.visible {
  opacity: 1;
  transform: translateY(0);
}

/* ── Selection ── */
[data-scope^="explainer-"] ::selection {
  background-color: var(--accent-blue);
  color: white;
}

/* ── Scrollbar ── */
[data-scope^="explainer-"] ::-webkit-scrollbar { width: 4px; }
[data-scope^="explainer-"] ::-webkit-scrollbar-track { background: var(--bg-secondary); }
[data-scope^="explainer-"] ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
[data-scope^="explainer-"] ::-webkit-scrollbar-thumb:hover { background: var(--text-tertiary); }

/* ── Staggered reveal children ── */
[data-scope^="explainer-"] .stagger-children > * {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}
[data-scope^="explainer-"] .stagger-children.visible > *:nth-child(1) { transition-delay: 0s; }
[data-scope^="explainer-"] .stagger-children.visible > *:nth-child(2) { transition-delay: 0.1s; }
[data-scope^="explainer-"] .stagger-children.visible > *:nth-child(3) { transition-delay: 0.15s; }
[data-scope^="explainer-"] .stagger-children.visible > *:nth-child(4) { transition-delay: 0.2s; }
[data-scope^="explainer-"] .stagger-children.visible > *:nth-child(5) { transition-delay: 0.25s; }
[data-scope^="explainer-"] .stagger-children.visible > *:nth-child(6) { transition-delay: 0.3s; }
[data-scope^="explainer-"] .stagger-children.visible > * {
  opacity: 1;
  transform: translateY(0);
}

/* ── Accordion animation ── */
[data-scope^="explainer-"] .accordion-content {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.35s ease-out;
}
[data-scope^="explainer-"] .accordion-content.open {
  grid-template-rows: 1fr;
}
[data-scope^="explainer-"] .accordion-content > div {
  overflow: hidden;
}

/* ── Mobile bottom nav ── */
[data-scope^="explainer-"] .mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 50;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: color-mix(in srgb, var(--bg-card) 85%, transparent);
  border-top: 1px solid var(--border);
}

/* ── Focus visible ── */
[data-scope^="explainer-"] :focus-visible {
  outline: 2px solid var(--accent-blue);
  outline-offset: 2px;
}
